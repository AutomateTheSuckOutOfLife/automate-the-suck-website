---
import Layout from '../layouts/Layout.astro';
import SocialFollow from '../components/SocialFollow.astro';
import { getCollection } from 'astro:content';
import { format } from 'date-fns';

// Get all projects from the content collection
const projects = await getCollection('projects');

// Filter out drafts in production
const isDevelopment = import.meta.env.DEV;
const filteredProjects = projects.filter(project => isDevelopment || !project.data.draft);

// Sort projects by date
const sortedProjects = filteredProjects.sort((a, b) => {
  if (!a.data.publishDate || !b.data.publishDate) return 0;
  return b.data.publishDate.getTime() - a.data.publishDate.getTime();
});
---

<Layout title="Projects | Automate The Suck">
  <div class="max-w-4xl mx-auto px-4 py-16">
    <h1 class="text-4xl md:text-5xl font-serif font-bold text-accent dark:text-dark-text mb-12">Our Projects</h1>
    
    <div class="text-lg text-accent dark:text-dark-text leading-relaxed mb-16">
      <p class="mb-12">
        We're building tools designed to help people take control of their time and technology. Here's what we're working on:
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-12 mb-16">
        <!-- AI-Powered Personal Tools -->
        <div class="bg-button-light dark:bg-dark-secondary border-2 border-primary dark:border-dark-primary rounded-lg p-6 hover:shadow-lg transition-shadow">
          <h3 class="text-xl font-serif font-bold mb-4 flex items-center gap-2 dark:text-dark-text">
            <span>ü§ñ</span>
            <span>AI-Powered Personal Tools</span>
          </h3>
          <ul class="space-y-2 dark:text-dark-text/80">
            <li><strong>Second-Brain Systems:</strong> Organize your thoughts, tasks, and goals with customizable AI tools.</li>
            <li><strong>Mindful Journaling Apps:</strong> Track cognitive patterns to promote self-awareness and mental well-being.</li>
          </ul>
        </div>

        <!-- Community Empowerment -->
        <div class="bg-button-light dark:bg-dark-secondary border-2 border-primary dark:border-dark-primary rounded-lg p-6 hover:shadow-lg transition-shadow">
          <h3 class="text-xl font-serif font-bold mb-4 flex items-center gap-2 dark:text-dark-text">
            <span>üåç</span>
            <span>Community Empowerment</span>
          </h3>
          <ul class="space-y-2 dark:text-dark-text/80">
            <li><strong>Digital Empowerment Hubs:</strong> Set up in libraries to provide free AI resources and digital literacy support.</li>
            <li><strong>Mutual Aid Networks:</strong> Connect people with local resources and support networks.</li>
          </ul>
        </div>

        <!-- Accessibility Innovations -->
        <div class="bg-button-light dark:bg-dark-secondary border-2 border-primary dark:border-dark-primary rounded-lg p-6 hover:shadow-lg transition-shadow">
          <h3 class="text-xl font-serif font-bold mb-4 flex items-center gap-2 dark:text-dark-text">
            <span>‚ôø</span>
            <span>Accessibility Innovations</span>
          </h3>
          <ul class="space-y-2 dark:text-dark-text/80">
            <li><strong>AI-Driven Testing:</strong> Simplifying digital accessibility testing for inclusivity.</li>
            <li><strong>Universal Interfaces:</strong> Voice, gesture, and alternative inputs for broader usability.</li>
          </ul>
        </div>

        <!-- Ethical AI Framework -->
        <div class="bg-button-light dark:bg-dark-secondary border-2 border-primary dark:border-dark-primary rounded-lg p-6 hover:shadow-lg transition-shadow">
          <h3 class="text-xl font-serif font-bold mb-4 flex items-center gap-2 dark:text-dark-text">
            <span>‚öñÔ∏è</span>
            <span>Ethical AI Framework</span>
          </h3>
          <ul class="space-y-2 dark:text-dark-text/80">
            <li><strong>Bring Your Own Model (BYOM):</strong> Flexible tools that let users maintain control over AI-powered automation.</li>
            <li><strong>Transparency Dashboards:</strong> Making AI decision-making processes understandable for everyone.</li>
          </ul>
        </div>

        <!-- Civic Engagement Tools -->
        <div class="bg-button-light dark:bg-dark-secondary border-2 border-primary dark:border-dark-primary rounded-lg p-6 hover:shadow-lg transition-shadow md:col-span-2">
          <h3 class="text-xl font-serif font-bold mb-4 flex items-center gap-2 dark:text-dark-text">
            <span>üèõÔ∏è</span>
            <span>Civic Engagement Tools</span>
          </h3>
          <ul class="space-y-2 dark:text-dark-text/80">
            <li><strong>Simplified Voter Resources:</strong> Easy access to voter registration, issue tracking, and legislative analysis.</li>
            <li><strong>Community Collaboration Platforms:</strong> Foster stronger connections between citizens and local governments.</li>
          </ul>
        </div>
      </div>
      
      <h2 class="text-3xl font-serif font-bold text-accent dark:text-dark-text mb-8">Featured Projects</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-1 gap-8">
        {sortedProjects.map(project => (
          <div class="bg-button-light dark:bg-dark-secondary border-2 border-primary dark:border-dark-primary rounded-lg overflow-hidden hover:shadow-lg transition-shadow">
            {project.data.headerImage && (
              <div class="aspect-video bg-[#FFFCEC] dark:bg-[#3A625C] flex items-center justify-center p-4">
                <img src={project.data.headerImage} alt={project.data.headerImageAlt || `Header image for ${project.data.title}`} class="max-h-full object-contain" />
              </div>
            )}
            <div class="p-6">
              <h3 class="text-2xl font-serif font-bold text-accent dark:text-dark-text mb-2">{project.data.title}</h3>
              <p class="text-accent/80 dark:text-dark-text/80 mb-4">{project.data.description}</p>
              <a href={`/projects/${project.slug}`} class="text-link-base hover:text-link-hover dark:text-link-dark-base dark:hover:text-link-dark-hover transition-colors">Learn More ‚Üí</a>
            </div>
          </div>
        ))}
      </div>
    </div>
    
    <div class="mt-16">
      <SocialFollow containerClass="w-full" />
    </div>
    
    <div class="bg-primary dark:bg-dark-primary rounded-lg p-8 text-center mt-16">
      <h3 class="text-2xl font-serif font-bold text-white dark:text-dark-text mb-4">Interested in collaborating?</h3>
      <p class="text-white dark:text-dark-text mb-6">
        We're always looking for partners, contributors, and supporters to help us expand our impact.
      </p>
      <a href="/contact" class="inline-block bg-secondary text-white px-8 py-3 rounded-full font-semibold hover:bg-button-hover transition-colors dark:bg-link-dark-base dark:text-dark-background dark:hover:bg-link-dark-hover">
        Get in Touch
      </a>
    </div>
  </div>
</Layout> 